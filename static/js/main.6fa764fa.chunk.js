(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{197:function(e,t,n){e.exports=n(438)},202:function(e,t,n){},206:function(e,t,n){},438:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"createTimerOpen",function(){return k}),n.d(a,"createTimerClose",function(){return C}),n.d(a,"createTimerChange",function(){return x}),n.d(a,"createTimerRegister",function(){return R}),n.d(a,"timerDelete",function(){return N}),n.d(a,"loadGameTimer",function(){return S});var r=n(0),i=n.n(r),o=n(22),c=n.n(o),l=(n(202),n(38)),s=n(39),u=n(42),m=n(40),d=n(43),h=n(29),f=n(12),b=n(30),p=n.n(b),v=(n(206),"CREATE_TIMER.OPEN"),g="CREATE_TIMER.CHANGE",E="CREATE_TIMER.CLOSE",O="CREATE_TIMER.REGISTER",w="GAME_TIMER.DELETE",j=n(183),y=n(196),T=new j.a("TIMER"),k=function(){return{type:v}},C=function(){return{type:E}},x=function(e,t){return{type:g,key:e,value:t}},R=function(e){var t=e.label,n=e.hour,a=e.minute,r=e.second;if(!t)throw new y.a({label:"Not Empty",_error:"Not Empty"});if(n+a+r===0)throw new y.a({second:"Not Zero",_error:"Not Zero"});return function(e){var i=new Date;T.put({_id:i,label:t,hour:n,minute:a,second:r}).then(function(o){e({type:O,id:i,label:t,hour:n,minute:a,second:r}),e(C())})}},N=function(e){return function(t){T.get(e).then(function(e){return T.remove(e)}).then(t({type:w,id:e}))}},S=function(){return function(e){T.allDocs({include_docs:!0}).then(function(t){console.log(t),p.a.forEach(t.rows,function(t){e({type:O,id:t.doc._id,label:t.doc.label,hour:t.doc.hour,minute:t.doc.minute,second:t.doc.second})})})}},_=n(65),A=n(188),I=n.n(A),M=n(189),D=n.n(M),B=n(57),G=n.n(B),W=n(46),L=n.n(W),P=n(190),U=n.n(P),J=n(192),Z=n.n(J),q=n(191),F=n.n(q),H=n(194),V=n.n(H),$=n(193),z=n.n($),K=n(20),Q=n(34),X=n.n(Q),Y=n(68),ee=n.n(Y),te=function(e){function t(e){var n;Object(l.a)(this,t),n=Object(u.a)(this,Object(m.a)(t).call(this));var a=X()(),r=X()(a).add(e.timer.hour,"hours").add(e.timer.minute,"minutes").add(e.timer.second,"seconds"),i=n.getDiff(a,r);return n.state={start:null,end:null,text:n.getText(i),timer:null,millis:i,passed:0,label:e.timer.label},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"start",value:function(){var e=this,t=this.state,n=t.millis,a=t.passed,r=X()(),i=X()().add(n-a,"milliseconds");this.state.timer&&clearInterval(this.state.timer),this.setState(function(t){return Object(K.a)({},t,{start:r,end:i,timer:setInterval(function(){return e.update()},16)})})}},{key:"stop",value:function(){if(this.state.timer){var e=this.state.start,t=X()(),n=this.getDiff(e,t),a=Math.min(this.state.passed+n,this.state.millis),r=this.getText(this.state.millis-a);clearInterval(this.state.timer),this.setState(function(e){return Object(K.a)({},e,{start:null,end:null,timer:null,passed:a,text:r})})}}},{key:"reset",value:function(){var e=this,t=this.state.millis,n=X()(),a=X()().add(t,"milliseconds");this.setState(function(t){return Object(K.a)({},t,{start:n,end:a,text:e.getText(e.getDiff(n,a)),passed:0})})}},{key:"update",value:function(){var e=this,t=X()(),n=this.state.end,a=this.getDiff(t,n);a<=0?(this.stop(),this.notify()):this.setState(function(t){return Object(K.a)({},t,{text:e.getText(a)})})}},{key:"getDiff",value:function(e,t){var n=t.diff(e,"milliseconds");return n<0&&(n=0),n}},{key:"getText",value:function(e){var t=e%1e3,n=(e=Math.floor(e/1e3))%60,a=(e=Math.floor(e/60))%60;return("00"+(e=Math.floor(e/60))).slice(-2)+":"+("00"+a).slice(-2)+":"+("00"+n).slice(-2)+"."+("000"+t).slice(-3)}},{key:"delete",value:function(){this.state.timer&&clearInterval(this.state.timer),this.props.actions.timerDelete(this.props.timer.id)}},{key:"notify",value:function(){new Notification(this.state.label+" was done!",{silent:!0})}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state,a=n.text,r=n.timer,o=n.label;return i.a.createElement("div",null,i.a.createElement(G.a,{variant:"subtitle1",gutterBottom:!0},o),i.a.createElement(G.a,{variant:"body1",gutterBottom:!0},a),i.a.createElement(L.a,{color:"secondary",className:t.button,"aria-label":"start",onClick:function(){return e.start()},disabled:null!=r},i.a.createElement(ee.a,null,"play_arrow")),i.a.createElement(L.a,{color:"secondary",className:t.button,"aria-label":"stop",onClick:function(){return e.stop()},disabled:null==r},i.a.createElement(ee.a,null,"pause")),i.a.createElement(L.a,{color:"secondary",className:t.button,"aria-label":"reset",onClick:function(){return e.reset()}},i.a.createElement(ee.a,null,"replay")),i.a.createElement(L.a,{color:"secondary",className:t.button,"aria-label":"delete",onClick:function(){return e.delete()}},i.a.createElement(ee.a,null,"delete")))}}]),t}(r.Component);var ne=Object(_.withStyles)(function(e){return{button:{margin:e.spacing.unit}}})(Object(h.b)(null,function(e){return{actions:Object(f.b)(a,e)}})(te)),ae=n(440),re=n(439),ie=n(187),oe=n.n(ie),ce=n(86),le=n(118),se=n.n(le),ue=n(120),me=n.n(ue),de=n(185),he=n.n(de),fe=n(119),be=n.n(fe),pe=n(117),ve=n.n(pe),ge=n(184),Ee=n.n(ge),Oe=function(e){var t=e.label,n=e.input,a=e.meta,r=a.touched,o=a.invalid,c=a.error,l=Object(ce.a)(e,["label","input","meta"]);return i.a.createElement(Ee.a,Object.assign({label:t,placeholder:t,error:r&&o,helperText:r&&c},n,l))},we=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.id,e.min),n=e.max,a=e.step,r=e.input,o=e.label,c=e.meta,l=c.touched,s=c.error,u=(e.children,Object(ce.a)(e,["id","min","max","step","input","label","meta","children"]));return i.a.createElement(be.a,{error:l},i.a.createElement(se.a,null,o),i.a.createElement(me.a,Object.assign({},r,u),p.a.map(p.a.range(t,n,a),function(e){return i.a.createElement(he.a,{key:e,value:e},("00"+e).slice(-2))})),function(e){var t=e.touched,n=e.error;return t&&n?i.a.createElement(ve.a,null,t&&n):void 0}({touched:l,error:s}))}}]),t}(r.Component);we.defaultProps={step:1};var je=we,ye=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.handleSubmit;return i.a.createElement("form",{onSubmit:e},i.a.createElement("div",null,i.a.createElement(ae.a,{name:"label",component:Oe,label:"label"})),i.a.createElement("div",null,i.a.createElement(ae.a,{name:"hour",component:je,props:{min:0,max:99,label:"hour"}}),i.a.createElement(ae.a,{name:"minute",component:je,props:{min:0,max:59,label:"minute"}}),i.a.createElement(ae.a,{name:"second",component:je,props:{min:0,max:59,label:"second"}}),i.a.createElement(oe.a,{type:"submit"},"Register")))}}]),t}(r.Component),Te=ye=Object(re.a)({form:"createTimer",initialValues:{hour:0,minute:0,second:0}})(ye),ke=function(e){function t(e){var n;return Object(l.a)(this,t),n=Object(u.a)(this,Object(m.a)(t).call(this,e)),e.actions.loadGameTimer(),Notification.requestPermission().then(function(e){}),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.gametimer,n=e.createtimer,a=e.actions,r=e.classes;return i.a.createElement("div",{className:r.root},i.a.createElement(I.a,{position:"static"},i.a.createElement(D.a,{variant:"dense"},i.a.createElement(L.a,{className:r.menuButton,color:"inherit","aria-label":"Menu"},i.a.createElement(U.a,null)),i.a.createElement(G.a,{variant:"h6",color:"inherit"},"Game Timer"))),p.a.map(t.timers,function(e){return i.a.createElement(ne,{key:e.id,timer:e})}),i.a.createElement(F.a,{color:"secondary","aria-label":"Add",className:r.addButton,onClick:function(){return a.createTimerOpen()}},i.a.createElement(Z.a,null)),i.a.createElement(z.a,{onClose:function(){return a.createTimerClose()},"aria-labelledby":"simple-dialog-title",open:n.show},i.a.createElement(V.a,{id:"simple-dialog-title"},"Create Timer"),i.a.createElement(Te,{onSubmit:function(e){return a.createTimerRegister(e)}})))}}]),t}(r.Component);var Ce=Object(_.withStyles)(function(e){return{root:{flexGrow:1},menuButton:{marginLeft:-18,marginRight:10},addButton:{position:"absolute",bottom:2*e.spacing.unit,right:2*e.spacing.unit},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:200},menu:{width:200}}},{withTheme:!0})(Object(h.b)(function(e,t){return{gametimer:e.gametimer,createtimer:e.createtimer}},function(e){return{actions:Object(f.b)(a,e)}})(ke)),xe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Re(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Ne=n(195),Se=n(441),_e=n(85),Ae={show:!1,hour:0,minute:0,second:0},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(K.a)({},e,{show:!0,hour:0,minute:0,second:0});case E:return Object(K.a)({},e,{show:!1});case g:return Object(K.a)({},e,Object(_e.a)({},t.key,t.value));case O:return Object(K.a)({},e,{show:!1});default:return Object(K.a)({},e)}},Me={timers:[]},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(K.a)({},e,{timers:p.a.concat(e.timers,{id:t.id,label:t.label,hour:t.hour,minute:t.minute,second:t.second})});case w:return Object(K.a)({},e,{timers:p.a.chain(e.timers).reject(function(e){return e.id===t.id}).value()});default:return Object(K.a)({},e)}},Be=Object(f.c)({form:Se.a,createtimer:Ie,gametimer:De}),Ge=Object(f.d)(Be,Object(f.a)(Ne.a));c.a.render(i.a.createElement(h.a,{store:Ge},i.a.createElement(Ce,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/game_timer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/game_timer","/service-worker.js");xe?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Re(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Re(t,e)})}}()}},[[197,1,2]]]);
//# sourceMappingURL=main.6fa764fa.chunk.js.map