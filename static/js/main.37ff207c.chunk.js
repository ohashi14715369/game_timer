(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{201:function(e,t,n){e.exports=n(444)},206:function(e,t,n){},210:function(e,t,n){},444:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"createTimerOpen",function(){return D}),n.d(a,"createTimerClose",function(){return x}),n.d(a,"createTimerChange",function(){return A}),n.d(a,"createTimerRegister",function(){return _}),n.d(a,"timerDelete",function(){return M}),n.d(a,"loadGameTimer",function(){return N}),n.d(a,"showDrawer",function(){return I}),n.d(a,"hideDrawer",function(){return S}),n.d(a,"updateApp",function(){return W});var r=n(0),i=n.n(r),o=n(21),c=n.n(o),l=(n(206),n(38)),s=n(39),u=n(42),m=n(40),d=n(43),f=n(29),h=n(12),b=n(30),p=n.n(b),v=(n(210),"CREATE_TIMER.OPEN"),E="CREATE_TIMER.CHANGE",g="CREATE_TIMER.CLOSE",w="CREATE_TIMER.REGISTER",O="GAME_TIMER.DELETE",y="GAME_TIMER.SHOW_DRAWER",j="GAME_TIMER.HIDE_DRAWER",T="GAME_TIMER.UPDATE_APP",k=n(185),R=n(200),C=new k.a("TIMER"),D=function(){return{type:v}},x=function(){return{type:g}},A=function(e,t){return{type:E,key:e,value:t}},_=function(e){var t=e.label,n=e.hour,a=e.minute,r=e.second;if(!t)throw new R.a({label:"Not Empty",_error:"Not Empty"});if(n+a+r===0)throw new R.a({second:"Not Zero",_error:"Not Zero"});return function(e){var i=new Date;C.put({_id:i,label:t,hour:n,minute:a,second:r}).then(function(o){e({type:w,id:i,label:t,hour:n,minute:a,second:r}),e(x())})}},M=function(e){return function(t){C.get(e).then(function(e){return C.remove(e)}).then(t({type:O,id:e}))}},N=function(){return function(e){C.allDocs({include_docs:!0}).then(function(t){console.log(t),p.a.forEach(t.rows,function(t){e({type:w,id:t.doc._id,label:t.doc.label,hour:t.doc.hour,minute:t.doc.minute,second:t.doc.second})})})}},I=function(){return{type:y}},S=function(){return{type:j}},W=function(){return{type:T}},G=n(66),B=n(190),P=n.n(B),L=n(191),U=n.n(L),H=n(46),J=n.n(H),Z=n(47),q=n.n(Z),F=n(192),K=n.n(F),V=n(196),$=n.n(V),z=n(195),Q=n.n(z),X=n(193),Y=n.n(X),ee=n(126),te=n.n(ee),ne=n(127),ae=n.n(ne),re=n(194),ie=n.n(re),oe=n(198),ce=n.n(oe),le=n(197),se=n.n(le),ue=n(19),me=n(34),de=n.n(me),fe=n(69),he=n.n(fe),be=function(e){function t(e){var n;Object(l.a)(this,t),n=Object(u.a)(this,Object(m.a)(t).call(this));var a=de()(),r=de()(a).add(e.timer.hour,"hours").add(e.timer.minute,"minutes").add(e.timer.second,"seconds"),i=n.getDiff(a,r);return n.state={start:null,end:null,text:n.getText(i),timer:null,millis:i,passed:0,label:e.timer.label},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"start",value:function(){var e=this,t=this.state,n=t.millis,a=t.passed,r=de()(),i=de()().add(n-a,"milliseconds");this.state.timer&&clearInterval(this.state.timer),this.setState(function(t){return Object(ue.a)({},t,{start:r,end:i,timer:setInterval(function(){return e.update()},16)})})}},{key:"stop",value:function(){if(this.state.timer){var e=this.state.start,t=de()(),n=this.getDiff(e,t),a=Math.min(this.state.passed+n,this.state.millis),r=this.getText(this.state.millis-a);clearInterval(this.state.timer),this.setState(function(e){return Object(ue.a)({},e,{start:null,end:null,timer:null,passed:a,text:r})})}}},{key:"reset",value:function(){var e=this,t=this.state.millis,n=de()(),a=de()().add(t,"milliseconds");this.setState(function(t){return Object(ue.a)({},t,{start:n,end:a,text:e.getText(e.getDiff(n,a)),passed:0})})}},{key:"update",value:function(){var e=this,t=de()(),n=this.state.end,a=this.getDiff(t,n);a<=0?(this.stop(),this.notify()):this.setState(function(t){return Object(ue.a)({},t,{text:e.getText(a)})})}},{key:"getDiff",value:function(e,t){var n=t.diff(e,"milliseconds");return n<0&&(n=0),n}},{key:"getText",value:function(e){var t=e%1e3,n=(e=Math.floor(e/1e3))%60,a=(e=Math.floor(e/60))%60;return("00"+(e=Math.floor(e/60))).slice(-2)+":"+("00"+a).slice(-2)+":"+("00"+n).slice(-2)+"."+("000"+t).slice(-3)}},{key:"delete",value:function(){this.state.timer&&clearInterval(this.state.timer),this.props.actions.timerDelete(this.props.timer.id)}},{key:"notify",value:function(){new Notification(this.state.label+" was done!",{silent:!0})}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state,a=n.text,r=n.timer,o=n.label;return i.a.createElement("div",null,i.a.createElement(J.a,{variant:"subtitle1",gutterBottom:!0},o),i.a.createElement(J.a,{variant:"body1",gutterBottom:!0},a),i.a.createElement(q.a,{color:"secondary",className:t.button,"aria-label":"start",onClick:function(){return e.start()},disabled:null!=r},i.a.createElement(he.a,null,"play_arrow")),i.a.createElement(q.a,{color:"secondary",className:t.button,"aria-label":"stop",onClick:function(){return e.stop()},disabled:null==r},i.a.createElement(he.a,null,"pause")),i.a.createElement(q.a,{color:"secondary",className:t.button,"aria-label":"reset",onClick:function(){return e.reset()}},i.a.createElement(he.a,null,"replay")),i.a.createElement(q.a,{color:"secondary",className:t.button,"aria-label":"delete",onClick:function(){return e.delete()}},i.a.createElement(he.a,null,"delete")))}}]),t}(r.Component);var pe=Object(G.withStyles)(function(e){return{button:{margin:e.spacing.unit}}})(Object(f.b)(null,function(e){return{actions:Object(h.b)(a,e)}})(be)),ve=n(446),Ee=n(445),ge=n(189),we=n.n(ge),Oe=n(91),ye=n(123),je=n.n(ye),Te=n(125),ke=n.n(Te),Re=n(187),Ce=n.n(Re),De=n(124),xe=n.n(De),Ae=n(122),_e=n.n(Ae),Me=n(186),Ne=n.n(Me),Ie=function(e){var t=e.label,n=e.input,a=e.meta,r=a.touched,o=a.invalid,c=a.error,l=Object(Oe.a)(e,["label","input","meta"]);return i.a.createElement(Ne.a,Object.assign({label:t,placeholder:t,error:r&&o,helperText:r&&c},n,l))},Se=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.id,e.min),n=e.max,a=e.step,r=e.input,o=e.label,c=e.meta,l=c.touched,s=c.error,u=(e.children,Object(Oe.a)(e,["id","min","max","step","input","label","meta","children"]));return i.a.createElement(xe.a,{error:l},i.a.createElement(je.a,null,o),i.a.createElement(ke.a,Object.assign({},r,u),p.a.map(p.a.range(t,n,a),function(e){return i.a.createElement(Ce.a,{key:e,value:e},("00"+e).slice(-2))})),function(e){var t=e.touched,n=e.error;return t&&n?i.a.createElement(_e.a,null,t&&n):void 0}({touched:l,error:s}))}}]),t}(r.Component);Se.defaultProps={step:1};var We=Se,Ge=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.handleSubmit;return i.a.createElement("form",{onSubmit:e},i.a.createElement("div",null,i.a.createElement(ve.a,{name:"label",component:Ie,label:"label"})),i.a.createElement("div",null,i.a.createElement(ve.a,{name:"hour",component:We,props:{min:0,max:99,label:"hour"}}),i.a.createElement(ve.a,{name:"minute",component:We,props:{min:0,max:59,label:"minute"}}),i.a.createElement(ve.a,{name:"second",component:We,props:{min:0,max:59,label:"second"}}),i.a.createElement(we.a,{type:"submit"},"Register")))}}]),t}(r.Component),Be=Ge=Object(Ee.a)({form:"createTimer",initialValues:{hour:0,minute:0,second:0}})(Ge),Pe=function(e){function t(e){var n;return Object(l.a)(this,t),n=Object(u.a)(this,Object(m.a)(t).call(this,e)),e.actions.loadGameTimer(),Notification.requestPermission().then(function(e){}),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.gametimer,n=e.createtimer,a=e.actions,r=e.classes;return i.a.createElement("div",{className:r.root},i.a.createElement(P.a,{position:"static"},i.a.createElement(U.a,{variant:"dense"},i.a.createElement(q.a,{className:r.menuButton,color:"inherit","aria-label":"Menu",onClick:function(){return a.showDrawer()}},i.a.createElement(K.a,null)),i.a.createElement(J.a,{variant:"h6",color:"inherit"},"Game Timer"))),i.a.createElement(Y.a,{open:t.visibleDrawer,onClose:function(){return a.hideDrawer()}},i.a.createElement("div",{tabIndex:0,role:"button",onClick:function(){return a.hideDrawer()},onKeyDown:function(){return a.hideDrawer()}},i.a.createElement("div",{className:r.list},i.a.createElement(te.a,null,i.a.createElement(ae.a,{button:!0,onClick:function(){return a.updateApp()}},i.a.createElement(ie.a,{primary:"Update"})))))),p.a.map(t.timers,function(e){return i.a.createElement(pe,{key:e.id,timer:e})}),i.a.createElement(Q.a,{color:"secondary","aria-label":"Add",className:r.addButton,onClick:function(){return a.createTimerOpen()}},i.a.createElement($.a,null)),i.a.createElement(se.a,{onClose:function(){return a.createTimerClose()},"aria-labelledby":"simple-dialog-title",open:n.show},i.a.createElement(ce.a,{id:"simple-dialog-title"},"Create Timer"),i.a.createElement(Be,{onSubmit:function(e){return a.createTimerRegister(e)}})))}}]),t}(r.Component);var Le=Object(G.withStyles)(function(e){return{root:{flexGrow:1},menuButton:{marginLeft:-18,marginRight:10},addButton:{position:"absolute",bottom:2*e.spacing.unit,right:2*e.spacing.unit},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:200},menu:{width:200}}},{withTheme:!0})(Object(f.b)(function(e,t){return{gametimer:e.gametimer,createtimer:e.createtimer}},function(e){return{actions:Object(h.b)(a,e)}})(Pe)),Ue=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function He(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Je=n(199),Ze=n(447),qe=n(90),Fe={show:!1,hour:0,minute:0,second:0},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(ue.a)({},e,{show:!0,hour:0,minute:0,second:0});case g:return Object(ue.a)({},e,{show:!1});case E:return Object(ue.a)({},e,Object(qe.a)({},t.key,t.value));case w:return Object(ue.a)({},e,{show:!1});default:return Object(ue.a)({},e)}},Ve={timers:[],visibleDrawer:!1},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case w:return Object(ue.a)({},e,{timers:p.a.concat(e.timers,{id:t.id,label:t.label,hour:t.hour,minute:t.minute,second:t.second})});case O:return Object(ue.a)({},e,{timers:p.a.chain(e.timers).reject(function(e){return e.id===t.id}).value()});case y:return Object(ue.a)({},e,{visibleDrawer:!0});case j:return Object(ue.a)({},e,{visibleDrawer:!1});case T:return navigator.serviceWorker.getRegistration().then(function(e){e.unregister()}),Object(ue.a)({},e);default:return Object(ue.a)({},e)}},ze=Object(h.c)({form:Ze.a,createtimer:Ke,gametimer:$e}),Qe=Object(h.d)(ze,Object(h.a)(Je.a));c.a.render(i.a.createElement(f.a,{store:Qe},i.a.createElement(Le,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/game_timer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/game_timer","/service-worker.js");Ue?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):He(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):He(t,e)})}}()}},[[201,1,2]]]);
//# sourceMappingURL=main.37ff207c.chunk.js.map