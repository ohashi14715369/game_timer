(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{201:function(e,t,n){e.exports=n(444)},206:function(e,t,n){},210:function(e,t,n){},444:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"createTimerOpen",function(){return D}),n.d(a,"createTimerClose",function(){return R}),n.d(a,"createTimerChange",function(){return A}),n.d(a,"createTimerRegister",function(){return k}),n.d(a,"timerDelete",function(){return _}),n.d(a,"loadGameTimer",function(){return C}),n.d(a,"showDrawer",function(){return x}),n.d(a,"hideDrawer",function(){return I}),n.d(a,"updateApp",function(){return M});var r=n(0),i=n.n(r),o=n(21),c=n.n(o),l=(n(206),n(38)),s=n(39),u=n(42),m=n(40),d=n(43),f=n(29),h=n(12),b=n(30),p=n.n(b),E=(n(210),"CREATE_TIMER.OPEN"),v="CREATE_TIMER.CHANGE",g="CREATE_TIMER.CLOSE",w="CREATE_TIMER.REGISTER",O={LOAD:"GAME_TIMER.LOAD",DELETE:"GAME_TIMER.DELETE",SHOW_DRAWER:"GAME_TIMER.SHOW_DRAWER",HIDE_DRAWER:"GAME_TIMER.HIDE_DRAWER",UPDATE_APP:"GAME_TIMER.UPDATE_APP"},y=n(185),j=n(200),T=new y.a("TIMER"),D=function(){return{type:E}},R=function(){return{type:g}},A=function(e,t){return{type:v,key:e,value:t}},k=function(e){var t=e.label,n=e.hour,a=e.minute,r=e.second;if(!t)throw new j.a({label:"Not Empty",_error:"Not Empty"});if(n+a+r===0)throw new j.a({second:"Not Zero",_error:"Not Zero"});return function(e){var i=new Date;T.put({_id:i,label:t,hour:n,minute:a,second:r}).then(function(o){e({type:w,id:i,label:t,hour:n,minute:a,second:r}),e(R())})}},_=function(e){return function(t){T.get(e).then(function(e){return T.remove(e)}).then(t({type:O.DELETE,id:e}))}},C=function(){return function(e){T.allDocs({include_docs:!0}).then(function(t){console.log(t),p.a.forEach(t.rows,function(t){e({type:w,id:t.doc._id,label:t.doc.label,hour:t.doc.hour,minute:t.doc.minute,second:t.doc.second})})})}},x=function(){return{type:O.SHOW_DRAWER}},I=function(){return{type:O.HIDE_DRAWER}},M=function(){return{type:O.UPDATE_APP}},W=n(66),S=n(190),N=n.n(S),P=n(191),L=n.n(P),G=n(46),B=n.n(G),H=n(47),U=n.n(H),J=n(192),Z=n.n(J),q=n(196),F=n.n(q),K=n(195),V=n.n(K),$=n(193),z=n.n($),Q=n(126),X=n.n(Q),Y=n(127),ee=n.n(Y),te=n(194),ne=n.n(te),ae=n(198),re=n.n(ae),ie=n(197),oe=n.n(ie),ce=n(19),le=n(34),se=n.n(le),ue=n(69),me=n.n(ue),de=function(e){function t(e){var n;Object(l.a)(this,t),n=Object(u.a)(this,Object(m.a)(t).call(this));var a=se()(),r=se()(a).add(e.timer.hour,"hours").add(e.timer.minute,"minutes").add(e.timer.second,"seconds"),i=n.getDiff(a,r);return n.state={start:null,end:null,text:n.getText(i),timer:null,millis:i,passed:0,label:e.timer.label},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"start",value:function(){var e=this,t=this.state,n=t.millis,a=t.passed,r=se()(),i=se()().add(n-a,"milliseconds");this.state.timer&&clearInterval(this.state.timer),this.setState(function(t){return Object(ce.a)({},t,{start:r,end:i,timer:setInterval(function(){return e.update()},16)})})}},{key:"stop",value:function(){if(this.state.timer){var e=this.state.start,t=se()(),n=this.getDiff(e,t),a=Math.min(this.state.passed+n,this.state.millis),r=this.getText(this.state.millis-a);clearInterval(this.state.timer),this.setState(function(e){return Object(ce.a)({},e,{start:null,end:null,timer:null,passed:a,text:r})})}}},{key:"reset",value:function(){var e=this,t=this.state.millis,n=se()(),a=se()().add(t,"milliseconds");this.setState(function(t){return Object(ce.a)({},t,{start:n,end:a,text:e.getText(e.getDiff(n,a)),passed:0})})}},{key:"update",value:function(){var e=this,t=se()(),n=this.state.end,a=this.getDiff(t,n);a<=0?(this.stop(),this.notify()):this.setState(function(t){return Object(ce.a)({},t,{text:e.getText(a)})})}},{key:"getDiff",value:function(e,t){var n=t.diff(e,"milliseconds");return n<0&&(n=0),n}},{key:"getText",value:function(e){var t=e%1e3,n=(e=Math.floor(e/1e3))%60,a=(e=Math.floor(e/60))%60;return("00"+(e=Math.floor(e/60))).slice(-2)+":"+("00"+a).slice(-2)+":"+("00"+n).slice(-2)+"."+("000"+t).slice(-3)}},{key:"delete",value:function(){this.state.timer&&clearInterval(this.state.timer),this.props.actions.timerDelete(this.props.timer.id)}},{key:"notify",value:function(){new Notification(this.state.label+" was done!",{silent:!0})}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state,a=n.text,r=n.timer,o=n.label;return i.a.createElement("div",null,i.a.createElement(B.a,{variant:"subtitle1",gutterBottom:!0},o),i.a.createElement(B.a,{variant:"body1",gutterBottom:!0},a),i.a.createElement(U.a,{color:"secondary",className:t.button,"aria-label":"start",onClick:function(){return e.start()},disabled:null!=r},i.a.createElement(me.a,null,"play_arrow")),i.a.createElement(U.a,{color:"secondary",className:t.button,"aria-label":"stop",onClick:function(){return e.stop()},disabled:null==r},i.a.createElement(me.a,null,"pause")),i.a.createElement(U.a,{color:"secondary",className:t.button,"aria-label":"reset",onClick:function(){return e.reset()}},i.a.createElement(me.a,null,"replay")),i.a.createElement(U.a,{color:"secondary",className:t.button,"aria-label":"delete",onClick:function(){return e.delete()}},i.a.createElement(me.a,null,"delete")))}}]),t}(r.Component);var fe=Object(W.withStyles)(function(e){return{button:{margin:e.spacing.unit}}})(Object(f.b)(null,function(e){return{actions:Object(h.b)(a,e)}})(de)),he=n(446),be=n(445),pe=n(189),Ee=n.n(pe),ve=n(91),ge=n(123),we=n.n(ge),Oe=n(125),ye=n.n(Oe),je=n(187),Te=n.n(je),De=n(124),Re=n.n(De),Ae=n(122),ke=n.n(Ae),_e=n(186),Ce=n.n(_e),xe=function(e){var t=e.label,n=e.input,a=e.meta,r=a.touched,o=a.invalid,c=a.error,l=Object(ve.a)(e,["label","input","meta"]);return i.a.createElement(Ce.a,Object.assign({label:t,placeholder:t,error:r&&o,helperText:r&&c},n,l))},Ie=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.id,e.min),n=e.max,a=e.step,r=e.input,o=e.label,c=e.meta,l=c.touched,s=c.error,u=(e.children,Object(ve.a)(e,["id","min","max","step","input","label","meta","children"]));return i.a.createElement(Re.a,{error:l},i.a.createElement(we.a,null,o),i.a.createElement(ye.a,Object.assign({},r,u),p.a.map(p.a.range(t,n,a),function(e){return i.a.createElement(Te.a,{key:e,value:e},("00"+e).slice(-2))})),function(e){var t=e.touched,n=e.error;return t&&n?i.a.createElement(ke.a,null,t&&n):void 0}({touched:l,error:s}))}}]),t}(r.Component);Ie.defaultProps={step:1};var Me=Ie,We=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.handleSubmit;return i.a.createElement("form",{onSubmit:e},i.a.createElement("div",null,i.a.createElement(he.a,{name:"label",component:xe,label:"label"})),i.a.createElement("div",null,i.a.createElement(he.a,{name:"hour",component:Me,props:{min:0,max:99,label:"hour"}}),i.a.createElement(he.a,{name:"minute",component:Me,props:{min:0,max:59,label:"minute"}}),i.a.createElement(he.a,{name:"second",component:Me,props:{min:0,max:59,label:"second"}}),i.a.createElement(Ee.a,{type:"submit"},"Register")))}}]),t}(r.Component),Se=We=Object(be.a)({form:"createTimer",initialValues:{hour:0,minute:0,second:0}})(We),Ne=function(e){function t(e){var n;return Object(l.a)(this,t),n=Object(u.a)(this,Object(m.a)(t).call(this,e)),e.actions.loadGameTimer(),Notification.requestPermission().then(function(e){}),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.gametimer,n=e.createtimer,a=e.actions,r=e.classes;return i.a.createElement("div",{className:r.root},i.a.createElement(N.a,{position:"static"},i.a.createElement(L.a,{variant:"dense"},i.a.createElement(U.a,{className:r.menuButton,color:"inherit","aria-label":"Menu",onClick:function(){return a.showDrawer()}},i.a.createElement(Z.a,null)),i.a.createElement(B.a,{variant:"h6",color:"inherit"},"Game Timer"))),i.a.createElement(z.a,{open:t.visibleDrawer,onClose:function(){return a.hideDrawer()}},i.a.createElement("div",{tabIndex:0,role:"button",onClick:function(){return a.hideDrawer()},onKeyDown:function(){return a.hideDrawer()}},i.a.createElement("div",{className:r.list},i.a.createElement(X.a,null,i.a.createElement(ee.a,{button:!0,onClick:function(){return a.updateApp()}},i.a.createElement(ne.a,{primary:"Update"})))))),p.a.map(t.timers,function(e){return i.a.createElement(fe,{key:e.id,timer:e})}),i.a.createElement(V.a,{color:"secondary","aria-label":"Add",className:r.addButton,onClick:function(){return a.createTimerOpen()}},i.a.createElement(F.a,null)),i.a.createElement(oe.a,{onClose:function(){return a.createTimerClose()},"aria-labelledby":"simple-dialog-title",open:n.show},i.a.createElement(re.a,{id:"simple-dialog-title"},"Create Timer"),i.a.createElement(Se,{onSubmit:function(e){return a.createTimerRegister(e)}})))}}]),t}(r.Component);var Pe=Object(W.withStyles)(function(e){return{root:{flexGrow:1},menuButton:{marginLeft:-18,marginRight:10},addButton:{position:"absolute",bottom:2*e.spacing.unit,right:2*e.spacing.unit},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:200},menu:{width:200}}},{withTheme:!0})(Object(f.b)(function(e,t){return{gametimer:e.gametimer,createtimer:e.createtimer}},function(e){return{actions:Object(h.b)(a,e)}})(Ne)),Le=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ge(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Be=n(199),He=n(447),Ue=n(90),Je={show:!1,hour:0,minute:0,second:0},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(ce.a)({},e,{show:!0,hour:0,minute:0,second:0});case g:return Object(ce.a)({},e,{show:!1});case v:return Object(ce.a)({},e,Object(Ue.a)({},t.key,t.value));case w:return Object(ce.a)({},e,{show:!1});default:return Object(ce.a)({},e)}},qe={timers:[],visibleDrawer:!1},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case w:return Object(ce.a)({},e,{timers:p.a.concat(e.timers,{id:t.id,label:t.label,hour:t.hour,minute:t.minute,second:t.second})});case O.DELETE:return Object(ce.a)({},e,{timers:p.a.chain(e.timers).reject(function(e){return e.id===t.id}).value()});case O.SHOW_DRAWER:return Object(ce.a)({},e,{visibleDrawer:!0});case O.CLOSE_DRAWER:return Object(ce.a)({},e,{visibleDrawer:!1});case O.UPDATE_APP:return navigator.serviceWorker.getRegistration().then(function(e){e.unregister()}),Object(ce.a)({},e);default:return Object(ce.a)({},e)}},Ke=Object(h.c)({form:He.a,createtimer:Ze,gametimer:Fe}),Ve=Object(h.d)(Ke,Object(h.a)(Be.a));c.a.render(i.a.createElement(f.a,{store:Ve},i.a.createElement(Pe,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/game_timer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/game_timer","/service-worker.js");Le?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ge(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Ge(t,e)})}}()}},[[201,1,2]]]);
//# sourceMappingURL=main.2da172eb.chunk.js.map